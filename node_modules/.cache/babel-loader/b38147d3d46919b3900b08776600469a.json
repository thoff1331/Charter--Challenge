{"ast":null,"code":"import _toConsumableArray from\"/Users/trevorhoffman/Desktop/react_projects/charter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/trevorhoffman/Desktop/react_projects/charter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/trevorhoffman/Desktop/react_projects/charter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/trevorhoffman/Desktop/react_projects/charter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/trevorhoffman/Desktop/react_projects/charter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component,Fragment}from\"react\";var LEFT_PAGE=\"LEFT\";var RIGHT_PAGE=\"RIGHT\";var range=function range(from,to){var step=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var i=from;var range=[];while(i<=to){range.push(i);i+=step;}return range;};var Pagination=/*#__PURE__*/function(_Component){_inherits(Pagination,_Component);var _super=_createSuper(Pagination);function Pagination(props){var _this;_classCallCheck(this,Pagination);_this=_super.call(this,props);_this.gotoPage=function(page){var _this$props$onPageCha=_this.props.onPageChanged,onPageChanged=_this$props$onPageCha===void 0?function(f){return f;}:_this$props$onPageCha;var currentPage=Math.max(0,Math.min(page,_this.totalPages));var paginationData={currentPage:currentPage,totalPages:_this.totalPages,pageLimit:_this.pageLimit,totalRecords:_this.totalRecords};_this.setState({currentPage:currentPage},function(){return onPageChanged(paginationData);});};_this.handleClick=function(page,evt){evt.preventDefault();_this.gotoPage(page);};_this.handleMoveLeft=function(evt){evt.preventDefault();_this.gotoPage(_this.state.currentPage-_this.pageNeighbours*2-1);};_this.handleMoveRight=function(evt){evt.preventDefault();_this.gotoPage(_this.state.currentPage+_this.pageNeighbours*2+1);};_this.fetchPageNumbers=function(){var totalPages=_this.totalPages;var currentPage=_this.state.currentPage;var pageNeighbours=_this.pageNeighbours;var totalNumbers=_this.pageNeighbours*2+3;var totalBlocks=totalNumbers+2;if(totalPages>totalBlocks){var pages=[];var leftBound=currentPage-pageNeighbours;var rightBound=currentPage+pageNeighbours;var beforeLastPage=totalPages-1;var startPage=leftBound>2?leftBound:2;var endPage=rightBound<beforeLastPage?rightBound:beforeLastPage;pages=range(startPage,endPage);var pagesCount=pages.length;var singleSpillOffset=totalNumbers-pagesCount-1;var leftSpill=startPage>2;var rightSpill=endPage<beforeLastPage;var leftSpillPage=LEFT_PAGE;var rightSpillPage=RIGHT_PAGE;if(leftSpill&&!rightSpill){var extraPages=range(startPage-singleSpillOffset,startPage-1);pages=[leftSpillPage].concat(_toConsumableArray(extraPages),_toConsumableArray(pages));}else if(!leftSpill&&rightSpill){var _extraPages=range(endPage+1,endPage+singleSpillOffset);pages=[].concat(_toConsumableArray(pages),_toConsumableArray(_extraPages),[rightSpillPage]);}else if(leftSpill&&rightSpill){pages=[leftSpillPage].concat(_toConsumableArray(pages),[rightSpillPage]);}return[1].concat(_toConsumableArray(pages),[totalPages]);}return range(1,totalPages);};var _props$totalRecords=props.totalRecords,totalRecords=_props$totalRecords===void 0?null:_props$totalRecords,_props$pageLimit=props.pageLimit,pageLimit=_props$pageLimit===void 0?10:_props$pageLimit,_props$pageNeighbours=props.pageNeighbours,_pageNeighbours=_props$pageNeighbours===void 0?0:_props$pageNeighbours;_this.pageLimit=typeof pageLimit===\"number\"?pageLimit:30;_this.totalRecords=typeof totalRecords===\"number\"?totalRecords:0;_this.pageNeighbours=typeof _pageNeighbours===\"number\"?Math.max(0,Math.min(_pageNeighbours,2)):0;_this.totalPages=Math.ceil(_this.totalRecords/_this.pageLimit);_this.state={currentPage:1};return _this;}_createClass(Pagination,[{key:\"componentDidMount\",value:function componentDidMount(){this.gotoPage(1);}},{key:\"render\",value:function render(){var _this2=this;if(!this.totalRecords)return null;if(this.totalPages===1)return null;var currentPage=this.state.currentPage;var pages=this.fetchPageNumbers();return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"Restaurants Pagination\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"pagination\",children:pages.map(function(page,index){if(page===LEFT_PAGE)return/*#__PURE__*/_jsx(\"li\",{className:\"page-item\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"page-link\",href:\"#\",\"aria-label\":\"Previous\",onClick:_this2.handleMoveLeft,children:[/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xAB\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Previous\"})]})},index);if(page===RIGHT_PAGE)return/*#__PURE__*/_jsx(\"li\",{className:\"page-item\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"page-link\",href:\"#\",\"aria-label\":\"Next\",onClick:_this2.handleMoveRight,children:[/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xBB\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Next\"})]})},index);return/*#__PURE__*/_jsx(\"li\",{className:\"page-item\".concat(currentPage===page?\" active\":\"\"),children:/*#__PURE__*/_jsx(\"a\",{className:\"page-link\",href:\"#\",onClick:function onClick(e){return _this2.handleClick(page,e);},children:page})},index);})})})});}}]);return Pagination;}(Component);export default Pagination;","map":{"version":3,"sources":["/Users/trevorhoffman/Desktop/react_projects/charter/src/components/pagination.js"],"names":["React","Component","Fragment","LEFT_PAGE","RIGHT_PAGE","range","from","to","step","i","push","Pagination","props","gotoPage","page","onPageChanged","f","currentPage","Math","max","min","totalPages","paginationData","pageLimit","totalRecords","setState","handleClick","evt","preventDefault","handleMoveLeft","state","pageNeighbours","handleMoveRight","fetchPageNumbers","totalNumbers","totalBlocks","pages","leftBound","rightBound","beforeLastPage","startPage","endPage","pagesCount","length","singleSpillOffset","leftSpill","rightSpill","leftSpillPage","rightSpillPage","extraPages","ceil","map","index","e"],"mappings":"k6BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CAGA,GAAMC,CAAAA,SAAS,CAAG,MAAlB,CACA,GAAMC,CAAAA,UAAU,CAAG,OAAnB,CAEA,GAAMC,CAAAA,KAAK,CAAG,eAACC,IAAD,CAAOC,EAAP,CAAwB,IAAbC,CAAAA,IAAa,2DAAN,CAAM,CACpC,GAAIC,CAAAA,CAAC,CAAGH,IAAR,CACA,GAAMD,CAAAA,KAAK,CAAG,EAAd,CAEA,MAAOI,CAAC,EAAIF,EAAZ,CAAgB,CACdF,KAAK,CAACK,IAAN,CAAWD,CAAX,EACAA,CAAC,EAAID,IAAL,CACD,CAED,MAAOH,CAAAA,KAAP,CACD,CAVD,C,GAYMM,CAAAA,U,wGACJ,oBAAYC,KAAZ,CAAmB,4CACjB,uBAAMA,KAAN,EADiB,MAqBnBC,QArBmB,CAqBR,SAACC,IAAD,CAAU,2BACkB,MAAKF,KADvB,CACXG,aADW,CACXA,aADW,gCACK,SAACC,CAAD,QAAOA,CAAAA,CAAP,EADL,uBAGnB,GAAMC,CAAAA,WAAW,CAAGC,IAAI,CAACC,GAAL,CAAS,CAAT,CAAYD,IAAI,CAACE,GAAL,CAASN,IAAT,CAAe,MAAKO,UAApB,CAAZ,CAApB,CAEA,GAAMC,CAAAA,cAAc,CAAG,CACrBL,WAAW,CAAXA,WADqB,CAErBI,UAAU,CAAE,MAAKA,UAFI,CAGrBE,SAAS,CAAE,MAAKA,SAHK,CAIrBC,YAAY,CAAE,MAAKA,YAJE,CAAvB,CAOA,MAAKC,QAAL,CAAc,CAAER,WAAW,CAAXA,WAAF,CAAd,CAA+B,iBAAMF,CAAAA,aAAa,CAACO,cAAD,CAAnB,EAA/B,EACD,CAlCkB,OAoCnBI,WApCmB,CAoCL,SAACZ,IAAD,CAAOa,GAAP,CAAe,CAC3BA,GAAG,CAACC,cAAJ,GACA,MAAKf,QAAL,CAAcC,IAAd,EACD,CAvCkB,OAyCnBe,cAzCmB,CAyCF,SAACF,GAAD,CAAS,CACxBA,GAAG,CAACC,cAAJ,GACA,MAAKf,QAAL,CAAc,MAAKiB,KAAL,CAAWb,WAAX,CAAyB,MAAKc,cAAL,CAAsB,CAA/C,CAAmD,CAAjE,EACD,CA5CkB,OA8CnBC,eA9CmB,CA8CD,SAACL,GAAD,CAAS,CACzBA,GAAG,CAACC,cAAJ,GACA,MAAKf,QAAL,CAAc,MAAKiB,KAAL,CAAWb,WAAX,CAAyB,MAAKc,cAAL,CAAsB,CAA/C,CAAmD,CAAjE,EACD,CAjDkB,OAmDnBE,gBAnDmB,CAmDA,UAAM,CACvB,GAAMZ,CAAAA,UAAU,CAAG,MAAKA,UAAxB,CACA,GAAMJ,CAAAA,WAAW,CAAG,MAAKa,KAAL,CAAWb,WAA/B,CACA,GAAMc,CAAAA,cAAc,CAAG,MAAKA,cAA5B,CAEA,GAAMG,CAAAA,YAAY,CAAG,MAAKH,cAAL,CAAsB,CAAtB,CAA0B,CAA/C,CACA,GAAMI,CAAAA,WAAW,CAAGD,YAAY,CAAG,CAAnC,CAEA,GAAIb,UAAU,CAAGc,WAAjB,CAA8B,CAC5B,GAAIC,CAAAA,KAAK,CAAG,EAAZ,CAEA,GAAMC,CAAAA,SAAS,CAAGpB,WAAW,CAAGc,cAAhC,CACA,GAAMO,CAAAA,UAAU,CAAGrB,WAAW,CAAGc,cAAjC,CACA,GAAMQ,CAAAA,cAAc,CAAGlB,UAAU,CAAG,CAApC,CAEA,GAAMmB,CAAAA,SAAS,CAAGH,SAAS,CAAG,CAAZ,CAAgBA,SAAhB,CAA4B,CAA9C,CACA,GAAMI,CAAAA,OAAO,CAAGH,UAAU,CAAGC,cAAb,CAA8BD,UAA9B,CAA2CC,cAA3D,CAEAH,KAAK,CAAG/B,KAAK,CAACmC,SAAD,CAAYC,OAAZ,CAAb,CAEA,GAAMC,CAAAA,UAAU,CAAGN,KAAK,CAACO,MAAzB,CACA,GAAMC,CAAAA,iBAAiB,CAAGV,YAAY,CAAGQ,UAAf,CAA4B,CAAtD,CAEA,GAAMG,CAAAA,SAAS,CAAGL,SAAS,CAAG,CAA9B,CACA,GAAMM,CAAAA,UAAU,CAAGL,OAAO,CAAGF,cAA7B,CAEA,GAAMQ,CAAAA,aAAa,CAAG5C,SAAtB,CACA,GAAM6C,CAAAA,cAAc,CAAG5C,UAAvB,CAEA,GAAIyC,SAAS,EAAI,CAACC,UAAlB,CAA8B,CAC5B,GAAMG,CAAAA,UAAU,CAAG5C,KAAK,CAACmC,SAAS,CAAGI,iBAAb,CAAgCJ,SAAS,CAAG,CAA5C,CAAxB,CACAJ,KAAK,EAAIW,aAAJ,4BAAsBE,UAAtB,qBAAqCb,KAArC,EAAL,CACD,CAHD,IAGO,IAAI,CAACS,SAAD,EAAcC,UAAlB,CAA8B,CACnC,GAAMG,CAAAA,WAAU,CAAG5C,KAAK,CAACoC,OAAO,CAAG,CAAX,CAAcA,OAAO,CAAGG,iBAAxB,CAAxB,CACAR,KAAK,8BAAOA,KAAP,qBAAiBa,WAAjB,GAA6BD,cAA7B,EAAL,CACD,CAHM,IAGA,IAAIH,SAAS,EAAIC,UAAjB,CAA6B,CAClCV,KAAK,EAAIW,aAAJ,4BAAsBX,KAAtB,GAA6BY,cAA7B,EAAL,CACD,CAED,OAAQ,CAAR,4BAAcZ,KAAd,GAAqBf,UAArB,GACD,CAED,MAAOhB,CAAAA,KAAK,CAAC,CAAD,CAAIgB,UAAJ,CAAZ,CACD,CA9FkB,yBAEmDT,KAFnD,CAETY,YAFS,CAETA,YAFS,8BAEM,IAFN,sCAEmDZ,KAFnD,CAEYW,SAFZ,CAEYA,SAFZ,2BAEwB,EAFxB,wCAEmDX,KAFnD,CAE4BmB,cAF5B,CAE4BA,eAF5B,gCAE6C,CAF7C,uBAIjB,MAAKR,SAAL,CAAiB,MAAOA,CAAAA,SAAP,GAAqB,QAArB,CAAgCA,SAAhC,CAA4C,EAA7D,CACA,MAAKC,YAAL,CAAoB,MAAOA,CAAAA,YAAP,GAAwB,QAAxB,CAAmCA,YAAnC,CAAkD,CAAtE,CAEA,MAAKO,cAAL,CACE,MAAOA,CAAAA,eAAP,GAA0B,QAA1B,CACIb,IAAI,CAACC,GAAL,CAAS,CAAT,CAAYD,IAAI,CAACE,GAAL,CAASW,eAAT,CAAyB,CAAzB,CAAZ,CADJ,CAEI,CAHN,CAKA,MAAKV,UAAL,CAAkBH,IAAI,CAACgC,IAAL,CAAU,MAAK1B,YAAL,CAAoB,MAAKD,SAAnC,CAAlB,CAEA,MAAKO,KAAL,CAAa,CAAEb,WAAW,CAAE,CAAf,CAAb,CAdiB,aAelB,C,oFAEmB,CAClB,KAAKJ,QAAL,CAAc,CAAd,EACD,C,uCA6EQ,iBACP,GAAI,CAAC,KAAKW,YAAV,CAAwB,MAAO,KAAP,CAExB,GAAI,KAAKH,UAAL,GAAoB,CAAxB,CAA2B,MAAO,KAAP,CAHpB,GAKCJ,CAAAA,WALD,CAKiB,KAAKa,KALtB,CAKCb,WALD,CAMP,GAAMmB,CAAAA,KAAK,CAAG,KAAKH,gBAAL,EAAd,CAEA,mBACE,KAAC,QAAD,wBACE,YAAK,aAAW,wBAAhB,uBACE,WAAI,SAAS,CAAC,YAAd,UACGG,KAAK,CAACe,GAAN,CAAU,SAACrC,IAAD,CAAOsC,KAAP,CAAiB,CAC1B,GAAItC,IAAI,GAAKX,SAAb,CACE,mBACE,WAAgB,SAAS,CAAC,WAA1B,uBACE,WACE,SAAS,CAAC,WADZ,CAEE,IAAI,CAAC,GAFP,CAGE,aAAW,UAHb,CAIE,OAAO,CAAE,MAAI,CAAC0B,cAJhB,wBAME,aAAM,cAAY,MAAlB,kBANF,cAOE,aAAM,SAAS,CAAC,SAAhB,sBAPF,GADF,EAASuB,KAAT,CADF,CAcF,GAAItC,IAAI,GAAKV,UAAb,CACE,mBACE,WAAgB,SAAS,CAAC,WAA1B,uBACE,WACE,SAAS,CAAC,WADZ,CAEE,IAAI,CAAC,GAFP,CAGE,aAAW,MAHb,CAIE,OAAO,CAAE,MAAI,CAAC4B,eAJhB,wBAME,aAAM,cAAY,MAAlB,kBANF,cAOE,aAAM,SAAS,CAAC,SAAhB,kBAPF,GADF,EAASoB,KAAT,CADF,CAcF,mBACE,WAEE,SAAS,oBACPnC,WAAW,GAAKH,IAAhB,CAAuB,SAAvB,CAAmC,EAD5B,CAFX,uBAME,UACE,SAAS,CAAC,WADZ,CAEE,IAAI,CAAC,GAFP,CAGE,OAAO,CAAE,iBAACuC,CAAD,QAAO,CAAA,MAAI,CAAC3B,WAAL,CAAiBZ,IAAjB,CAAuBuC,CAAvB,CAAP,EAHX,UAKGvC,IALH,EANF,EACOsC,KADP,CADF,CAgBD,CA/CA,CADH,EADF,EADF,EADF,CAwDD,C,wBAjKsBnD,S,EA2KzB,cAAeU,CAAAA,UAAf","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst LEFT_PAGE = \"LEFT\";\nconst RIGHT_PAGE = \"RIGHT\";\n\nconst range = (from, to, step = 1) => {\n  let i = from;\n  const range = [];\n\n  while (i <= to) {\n    range.push(i);\n    i += step;\n  }\n\n  return range;\n};\n\nclass Pagination extends Component {\n  constructor(props) {\n    super(props);\n    const { totalRecords = null, pageLimit = 10, pageNeighbours = 0 } = props;\n\n    this.pageLimit = typeof pageLimit === \"number\" ? pageLimit : 30;\n    this.totalRecords = typeof totalRecords === \"number\" ? totalRecords : 0;\n\n    this.pageNeighbours =\n      typeof pageNeighbours === \"number\"\n        ? Math.max(0, Math.min(pageNeighbours, 2))\n        : 0;\n\n    this.totalPages = Math.ceil(this.totalRecords / this.pageLimit);\n\n    this.state = { currentPage: 1 };\n  }\n\n  componentDidMount() {\n    this.gotoPage(1);\n  }\n\n  gotoPage = (page) => {\n    const { onPageChanged = (f) => f } = this.props;\n\n    const currentPage = Math.max(0, Math.min(page, this.totalPages));\n\n    const paginationData = {\n      currentPage,\n      totalPages: this.totalPages,\n      pageLimit: this.pageLimit,\n      totalRecords: this.totalRecords,\n    };\n\n    this.setState({ currentPage }, () => onPageChanged(paginationData));\n  };\n\n  handleClick = (page, evt) => {\n    evt.preventDefault();\n    this.gotoPage(page);\n  };\n\n  handleMoveLeft = (evt) => {\n    evt.preventDefault();\n    this.gotoPage(this.state.currentPage - this.pageNeighbours * 2 - 1);\n  };\n\n  handleMoveRight = (evt) => {\n    evt.preventDefault();\n    this.gotoPage(this.state.currentPage + this.pageNeighbours * 2 + 1);\n  };\n\n  fetchPageNumbers = () => {\n    const totalPages = this.totalPages;\n    const currentPage = this.state.currentPage;\n    const pageNeighbours = this.pageNeighbours;\n\n    const totalNumbers = this.pageNeighbours * 2 + 3;\n    const totalBlocks = totalNumbers + 2;\n\n    if (totalPages > totalBlocks) {\n      let pages = [];\n\n      const leftBound = currentPage - pageNeighbours;\n      const rightBound = currentPage + pageNeighbours;\n      const beforeLastPage = totalPages - 1;\n\n      const startPage = leftBound > 2 ? leftBound : 2;\n      const endPage = rightBound < beforeLastPage ? rightBound : beforeLastPage;\n\n      pages = range(startPage, endPage);\n\n      const pagesCount = pages.length;\n      const singleSpillOffset = totalNumbers - pagesCount - 1;\n\n      const leftSpill = startPage > 2;\n      const rightSpill = endPage < beforeLastPage;\n\n      const leftSpillPage = LEFT_PAGE;\n      const rightSpillPage = RIGHT_PAGE;\n\n      if (leftSpill && !rightSpill) {\n        const extraPages = range(startPage - singleSpillOffset, startPage - 1);\n        pages = [leftSpillPage, ...extraPages, ...pages];\n      } else if (!leftSpill && rightSpill) {\n        const extraPages = range(endPage + 1, endPage + singleSpillOffset);\n        pages = [...pages, ...extraPages, rightSpillPage];\n      } else if (leftSpill && rightSpill) {\n        pages = [leftSpillPage, ...pages, rightSpillPage];\n      }\n\n      return [1, ...pages, totalPages];\n    }\n\n    return range(1, totalPages);\n  };\n\n  render() {\n    if (!this.totalRecords) return null;\n\n    if (this.totalPages === 1) return null;\n\n    const { currentPage } = this.state;\n    const pages = this.fetchPageNumbers();\n\n    return (\n      <Fragment>\n        <nav aria-label=\"Restaurants Pagination\">\n          <ul className=\"pagination\">\n            {pages.map((page, index) => {\n              if (page === LEFT_PAGE)\n                return (\n                  <li key={index} className=\"page-item\">\n                    <a\n                      className=\"page-link\"\n                      href=\"#\"\n                      aria-label=\"Previous\"\n                      onClick={this.handleMoveLeft}\n                    >\n                      <span aria-hidden=\"true\">&laquo;</span>\n                      <span className=\"sr-only\">Previous</span>\n                    </a>\n                  </li>\n                );\n\n              if (page === RIGHT_PAGE)\n                return (\n                  <li key={index} className=\"page-item\">\n                    <a\n                      className=\"page-link\"\n                      href=\"#\"\n                      aria-label=\"Next\"\n                      onClick={this.handleMoveRight}\n                    >\n                      <span aria-hidden=\"true\">&raquo;</span>\n                      <span className=\"sr-only\">Next</span>\n                    </a>\n                  </li>\n                );\n\n              return (\n                <li\n                  key={index}\n                  className={`page-item${\n                    currentPage === page ? \" active\" : \"\"\n                  }`}\n                >\n                  <a\n                    className=\"page-link\"\n                    href=\"#\"\n                    onClick={(e) => this.handleClick(page, e)}\n                  >\n                    {page}\n                  </a>\n                </li>\n              );\n            })}\n          </ul>\n        </nav>\n      </Fragment>\n    );\n  }\n}\n\nPagination.propTypes = {\n  totalRecords: PropTypes.number.isRequired,\n  pageLimit: PropTypes.number,\n  pageNeighbours: PropTypes.number,\n  onPageChanged: PropTypes.func,\n};\n\nexport default Pagination;\n"]},"metadata":{},"sourceType":"module"}