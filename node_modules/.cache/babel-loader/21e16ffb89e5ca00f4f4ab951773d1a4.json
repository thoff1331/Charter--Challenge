{"ast":null,"code":"import _classCallCheck from\"/Users/trevorhoffman/Desktop/react_projects/charter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/trevorhoffman/Desktop/react_projects/charter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/trevorhoffman/Desktop/react_projects/charter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/trevorhoffman/Desktop/react_projects/charter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import\"./App.css\";import Pagination from\"./components/pagination\";import stateOptions from\"./data/stateOPtions.json\";import filterOptions from\"./data/filterOptions.json\";import React from\"react\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);_this.onChangePage=function(data){var allItems=_this.state.allItems;var currentPage=data.currentPage,totalPages=data.totalPages,pageLimit=data.pageLimit;var offset=(currentPage-1)*pageLimit;var currentItems=allItems.slice(offset,offset+pageLimit);_this.setState({currentPage:currentPage,currentItems:currentItems,totalPages:totalPages});};_this.tableData=function(items){return items.map(function(restaurant,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:restaurant.name}),/*#__PURE__*/_jsx(\"td\",{children:restaurant.address1}),/*#__PURE__*/_jsx(\"td\",{children:restaurant.city}),/*#__PURE__*/_jsx(\"td\",{children:restaurant.state}),/*#__PURE__*/_jsx(\"td\",{children:restaurant.telephone}),/*#__PURE__*/_jsx(\"td\",{children:restaurant.genre}),/*#__PURE__*/_jsx(\"td\",{children:restaurant.attire})]},index);});};_this.createHeader=function(){var header=[\"Name\",\"Address\",\"City\",\"State\",\"Phone Number\",\"Genre\",\"Attire\"];return header.map(function(row,index){return/*#__PURE__*/_jsx(\"th\",{children:row.toUpperCase()},index);});};_this.editSearchTerm=function(e){_this.setState({searchTerm:e.target.value});};_this.dynamicSearch=function(){return _this.state.allItems.filter(function(name){return name.includes(_this.state.searchTerm)||name.city===_this.state.searchTerm||name.genre.includes(_this.state.searchTerm);});};_this.handleGenreChange=function(event){_this.setState({genre:event.target.value});};_this.handleLocationChange=function(event){_this.setState({location:event.target.value});};_this.resetFilters=function(){_this.setState({location:stateOptions[0].label,genre:null});window.location.reload();};_this.state={allItems:[],currentItems:[],currentPage:null,totalPages:null,searchTerm:\"\",genre:null,location:null};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch(\"https://code-challenge.spectrumtoolbox.com/api/restaurants\",{headers:{Authorization:\"Api-Key q3MNxtfep8Gt\"}}).then(function(res){return res.json();}).then(function(allItems){_this2.setState({allItems:allItems});});}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,allItems=_this$state.allItems,currentItems=_this$state.currentItems,currentPage=_this$state.currentPage,totalPages=_this$state.totalPages,itemsOnPage=_this$state.itemsOnPage;var totalItems=allItems.length;var sortedItems=this.state.allItems.sort(function(a,b){if(a.name<b.name){return-1;}if(a.name>b.name){return 1;}return 0;});var searched=[];var filteredRestaurants=allItems.map(function(restaurant){if(restaurant.name.toUpperCase().includes(_this3.state.searchTerm.toUpperCase())||restaurant.city.startsWith(_this3.state.searchTerm)||restaurant.genre.includes(_this3.state.searchTerm)){return searched.push(restaurant);}});var genreArray=[];var genreFiltered=allItems.map(function(restaurant){if(restaurant.genre.includes(_this3.state.genre)){genreArray.push(restaurant);}});var locationArray=[];var locationFiltered=allItems.map(function(restaurant){if(restaurant.state===_this3.state.location){locationArray.push(restaurant);}});var bothFiltersActive=[];var bothFilters=allItems.map(function(restaurant){if(restaurant.state===_this3.state.location&&restaurant.genre.includes(_this3.state.genre)&&restaurant.name.includes(_this3.state.searchTerm)){bothFiltersActive.push(restaurant);}});var searchAndGenreActive=[];var searchAndGenre=allItems.map(function(restaurant){if(restaurant.genre.includes(_this3.state.genre)&&restaurant.name.includes(_this3.state.searchTerm)){searchAndGenreActive.push(restaurant);}});if(totalItems===0)return null;var headerClass=[\"text-dark py-2 pr-4 m-0\",currentPage?\"border-gray border-right\":\"\"].join(\" \").trim();return/*#__PURE__*/_jsx(\"div\",{className:\"pageContainer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row d-flex flex-row py-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-100 px-4 py-5 d-flex flex-row flex-wrap align-items-center justify-content-between\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-row py-4 align-items-center\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Choose A Restaurant\"}),/*#__PURE__*/_jsx(\"div\",{className:\"restaurantCount\",children:/*#__PURE__*/_jsxs(\"h4\",{className:headerClass,children:[/*#__PURE__*/_jsx(\"strong\",{children:totalItems}),\" Restaurants to Choose From\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"search\",children:/*#__PURE__*/_jsx(\"input\",{value:this.state.searchTerm,onChange:this.editSearchTerm,placeholder:\"Search by Name,City, or Genre\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-form\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"filters\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Select A State \"}),/*#__PURE__*/_jsx(\"select\",{value:this.state.location||\"\",name:this.state.location,id:this.state.location,onChange:this.handleLocationChange,children:stateOptions.map(function(abbr,index){return/*#__PURE__*/_jsx(\"option\",{value:abbr.value,children:abbr.value});})}),/*#__PURE__*/_jsx(\"h3\",{className:\"resetFilters\",onClick:this.resetFilters,children:\"Reset Filters\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Select a Genre\"}),/*#__PURE__*/_jsx(\"select\",{value:this.state.genre||\"\",name:this.state.genre,id:this.state.genre,onChange:this.handleGenreChange,children:filterOptions.sort(function(a,b){if(a.label<b.label){return-1;}if(a.label>b.label){return 1;}return 0;}).map(function(genre,index){return/*#__PURE__*/_jsx(\"option\",{value:genre.value,children:genre.value},index);})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"filter\",children:/*#__PURE__*/_jsx(\"table\",{id:\"myTable\",className:\"restaurants\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsx(\"tr\",{children:this.createHeader()}),this.state.location!=null&&this.state.genre!=null?this.tableData(bothFiltersActive):this.state.genre!=null&&this.state.searchTerm!=\"\"?this.tableData(searchAndGenreActive):this.state.searchTerm===\"\"&&this.state.location===null&&this.state.genre===null?this.tableData(currentItems):this.state.location!=null?this.tableData(locationArray):this.state.genre!=null?this.tableData(genreArray):this.state.location!=null&&this.state.genre!=null&&this.state.searchTerm===\"\"?this.tableData(searched.concat(genreFiltered,locationFiltered)):this.tableData(searched)]})})}),/*#__PURE__*/_jsx(Pagination,{totalRecords:totalItems,pageLimit:10,pageNeighbours:1,onPageChanged:this.onChangePage}),currentPage&&/*#__PURE__*/_jsxs(\"span\",{className:\"currentPage\",children:[\"Page \",/*#__PURE__*/_jsx(\"span\",{className:\"font-weight-bold\",children:currentPage}),\" /\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"font-weight-bold\",children:totalPages})]})]})});}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/trevorhoffman/Desktop/react_projects/charter/src/App.js"],"names":["Pagination","stateOptions","filterOptions","React","App","onChangePage","data","allItems","state","currentPage","totalPages","pageLimit","offset","currentItems","slice","setState","tableData","items","map","restaurant","index","name","address1","city","telephone","genre","attire","createHeader","header","row","toUpperCase","editSearchTerm","e","searchTerm","target","value","dynamicSearch","filter","includes","handleGenreChange","event","handleLocationChange","location","resetFilters","label","window","reload","fetch","headers","Authorization","then","res","json","itemsOnPage","totalItems","length","sortedItems","sort","a","b","searched","filteredRestaurants","startsWith","push","genreArray","genreFiltered","locationArray","locationFiltered","bothFiltersActive","bothFilters","searchAndGenreActive","searchAndGenre","headerClass","join","trim","abbr","concat","Component"],"mappings":"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","sourcesContent":["import \"./App.css\";\nimport Pagination from \"./components/pagination\";\nimport stateOptions from \"./data/stateOPtions.json\";\nimport filterOptions from \"./data/filterOptions.json\";\nimport React from \"react\";\nclass App extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      allItems: [],\n      currentItems: [],\n      currentPage: null,\n      totalPages: null,\n      searchTerm: \"\",\n      genre: null,\n      location: null,\n    };\n  }\n  componentDidMount() {\n    fetch(\"https://code-challenge.spectrumtoolbox.com/api/restaurants\", {\n      headers: {\n        Authorization: \"Api-Key q3MNxtfep8Gt\",\n      },\n    })\n      .then((res) => res.json())\n      .then((allItems) => {\n        this.setState({\n          allItems,\n        });\n      });\n  }\n  onChangePage = (data) => {\n    const { allItems } = this.state;\n    const { currentPage, totalPages, pageLimit } = data;\n    const offset = (currentPage - 1) * pageLimit;\n    const currentItems = allItems.slice(offset, offset + pageLimit);\n\n    this.setState({ currentPage, currentItems, totalPages });\n  };\n  tableData = (items) => {\n    return items.map((restaurant, index) => {\n      return (\n        <tr key={index}>\n          <td>{restaurant.name}</td>\n          <td>{restaurant.address1}</td>\n          <td>{restaurant.city}</td>\n          <td>{restaurant.state}</td>\n          <td>{restaurant.telephone}</td>\n          <td>{restaurant.genre}</td>\n          <td>{restaurant.attire}</td>\n        </tr>\n      );\n    });\n  };\n  createHeader = () => {\n    let header = [\n      \"Name\",\n      \"Address\",\n      \"City\",\n      \"State\",\n      \"Phone Number\",\n      \"Genre\",\n      \"Attire\",\n    ];\n    return header.map((row, index) => {\n      return <th key={index}>{row.toUpperCase()}</th>;\n    });\n  };\n  editSearchTerm = (e) => {\n    this.setState({ searchTerm: e.target.value });\n  };\n  dynamicSearch = () => {\n    return this.state.allItems.filter(\n      (name) =>\n        name.includes(this.state.searchTerm) ||\n        name.city === this.state.searchTerm ||\n        name.genre.includes(this.state.searchTerm)\n    );\n  };\n  handleGenreChange = (event) => {\n    this.setState({ genre: event.target.value });\n  };\n\n  handleLocationChange = (event) => {\n    this.setState({ location: event.target.value });\n  };\n  resetFilters = () => {\n    this.setState({\n      location: stateOptions[0].label,\n      genre: null,\n    });\n    window.location.reload();\n  };\n  render() {\n    const {\n      allItems,\n      currentItems,\n      currentPage,\n      totalPages,\n      itemsOnPage,\n    } = this.state;\n    const totalItems = allItems.length;\n    const sortedItems = this.state.allItems.sort(function (a, b) {\n      if (a.name < b.name) {\n        return -1;\n      }\n      if (a.name > b.name) {\n        return 1;\n      }\n      return 0;\n    });\n    const searched = [];\n    const filteredRestaurants = allItems.map((restaurant) => {\n      if (\n        restaurant.name\n          .toUpperCase()\n          .includes(this.state.searchTerm.toUpperCase()) ||\n        restaurant.city.startsWith(this.state.searchTerm) ||\n        restaurant.genre.includes(this.state.searchTerm)\n      ) {\n        return searched.push(restaurant);\n      }\n    });\n    const genreArray = [];\n    const genreFiltered = allItems.map((restaurant) => {\n      if (restaurant.genre.includes(this.state.genre)) {\n        genreArray.push(restaurant);\n      }\n    });\n    const locationArray = [];\n    const locationFiltered = allItems.map((restaurant) => {\n      if (restaurant.state === this.state.location) {\n        locationArray.push(restaurant);\n      }\n    });\n    const bothFiltersActive = [];\n\n    const bothFilters = allItems.map((restaurant) => {\n      if (\n        restaurant.state === this.state.location &&\n        restaurant.genre.includes(this.state.genre) &&\n        restaurant.name.includes(this.state.searchTerm)\n      ) {\n        bothFiltersActive.push(restaurant);\n      }\n    });\n    const searchAndGenreActive = [];\n\n    const searchAndGenre = allItems.map((restaurant) => {\n      if (\n        restaurant.genre.includes(this.state.genre) &&\n        restaurant.name.includes(this.state.searchTerm)\n      ) {\n        searchAndGenreActive.push(restaurant);\n      }\n    });\n\n    if (totalItems === 0) return null;\n    const headerClass = [\n      \"text-dark py-2 pr-4 m-0\",\n      currentPage ? \"border-gray border-right\" : \"\",\n    ]\n      .join(\" \")\n      .trim();\n\n    return (\n      <div className=\"pageContainer\">\n        <div className=\"row d-flex flex-row py-5\">\n          <div className=\"w-100 px-4 py-5 d-flex flex-row flex-wrap align-items-center justify-content-between\">\n            <div className=\"d-flex flex-row py-4 align-items-center\"></div>\n          </div>\n          <h1 className=\"title\">Choose A Restaurant</h1>\n          <div className=\"restaurantCount\">\n            <h4 className={headerClass}>\n              <strong>{totalItems}</strong> Restaurants to Choose From\n            </h4>\n          </div>\n\n          <div className=\"search\">\n            <input\n              value={this.state.searchTerm}\n              onChange={this.editSearchTerm}\n              placeholder=\"Search by Name,City, or Genre\"\n            />\n          </div>\n          <div className=\"filter-form\">\n            <div className=\"filters\">\n              <label>Select A State </label>\n              <select\n                value={this.state.location || \"\"}\n                name={this.state.location}\n                id={this.state.location}\n                onChange={this.handleLocationChange}\n              >\n                {stateOptions.map((abbr, index) => {\n                  return <option value={abbr.value}>{abbr.value}</option>;\n                })}\n              </select>\n              <h3 className=\"resetFilters\" onClick={this.resetFilters}>\n                Reset Filters\n              </h3>\n              <label>Select a Genre</label>\n              <select\n                value={this.state.genre || \"\"}\n                name={this.state.genre}\n                id={this.state.genre}\n                onChange={this.handleGenreChange}\n              >\n                {filterOptions\n                  .sort(function (a, b) {\n                    if (a.label < b.label) {\n                      return -1;\n                    }\n                    if (a.label > b.label) {\n                      return 1;\n                    }\n                    return 0;\n                  })\n                  .map((genre, index) => {\n                    return (\n                      <option key={index} value={genre.value}>\n                        {genre.value}\n                      </option>\n                    );\n                  })}\n              </select>\n            </div>\n          </div>\n          <div className=\"filter\">\n            <table id=\"myTable\" className=\"restaurants\">\n              <tbody>\n                <tr>{this.createHeader()}</tr>\n                {this.state.location != null && this.state.genre != null\n                  ? this.tableData(bothFiltersActive)\n                  : this.state.genre != null && this.state.searchTerm != \"\"\n                  ? this.tableData(searchAndGenreActive)\n                  : this.state.searchTerm === \"\" &&\n                    this.state.location === null &&\n                    this.state.genre === null\n                  ? this.tableData(currentItems)\n                  : this.state.location != null\n                  ? this.tableData(locationArray)\n                  : this.state.genre != null\n                  ? this.tableData(genreArray)\n                  : this.state.location != null &&\n                    this.state.genre != null &&\n                    this.state.searchTerm === \"\"\n                  ? this.tableData(\n                      searched.concat(genreFiltered, locationFiltered)\n                    )\n                  : this.tableData(searched)}\n              </tbody>\n            </table>\n          </div>\n          <Pagination\n            totalRecords={totalItems}\n            pageLimit={10}\n            pageNeighbours={1}\n            onPageChanged={this.onChangePage}\n          />\n          {currentPage && (\n            <span className=\"currentPage\">\n              Page <span className=\"font-weight-bold\">{currentPage}</span> /{\" \"}\n              <span className=\"font-weight-bold\">{totalPages}</span>\n            </span>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}